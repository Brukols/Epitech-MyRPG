/*
** EPITECH PROJECT, 2019
** my_rog
** File description:
** init_buttons_fs_scene
*/

#include "my_rpg.h"

buttons_t *init_music_button(buttons_t *button)
{
    button->type = BUTTON_SETTINGS_MUSIC;
    button->texture = sfTexture_createFromFile(\
    "ressources/sprites/settings/music.png", NULL);
    button->hover = sfTexture_createFromFile(\
    "ressources/sprites/settings/stop.png", NULL);
    button->sprite = sfSprite_create();
    button->pos.x = 750;
    button->pos.y = 450;
    button->hitbox_pos = init_vec2f(86, 49);
    button->size = init_vec2f(627, 226);
    button->clock = sfClock_create();
    return (button);
}

buttons_t *init_exit_button(buttons_t *button)
{
    button->type = BUTTON_SETTINGS_EXIT;
    button->texture = sfTexture_createFromFile(\
    "ressources/sprites/menu/exit.png", NULL);
    button->hover = sfTexture_createFromFile(\
    "ressources/sprites/menu/settings2.png", NULL);
    button->sprite = sfSprite_create();
    button->pos.x = 1650;
    button->pos.y = 900;
    button->hitbox_pos = init_vec2f(1682, 905);
    button->size = init_vec2f(93, 92);
    button->callback = &leave_the_game;
    return (button);
}

buttons_t *init_settings(void)
{
    buttons_t *buttons = malloc(sizeof(buttons_t));
    buttons_t *(*fill_buttons[])() = {init_music_button, init_exit_button};

    if (!buttons)
        return (NULL);
    buttons->prev = NULL;
    for (int i = 0; i < 2; i++) {
        buttons = fill_buttons[i](buttons);
        if (!buttons)
            return (NULL);
        if (i == 1)
            break;
        if (!(buttons->next = malloc(sizeof(buttons_t))))
            return (NULL);
        buttons->next->prev = buttons;
        buttons = buttons->next;
    }
    buttons->next = NULL;
    for (; buttons->prev; buttons = buttons->prev);
    return (buttons);
}
